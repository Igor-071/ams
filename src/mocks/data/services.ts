import type { Service, AccessRequest, ServiceBlock } from '@/types/service.ts'
import { hmrCache } from './hmr-cache.ts'

export const mockServices: Service[] = hmrCache('__ams_services', () => [
  {
    id: 'svc-1',
    merchantId: 'user-merchant-1',
    merchantName: 'ACME APIs',
    name: 'Weather API',
    description:
      'Real-time weather data for any location worldwide. Supports current conditions, forecasts, and historical data.',
    type: 'api',
    status: 'active',
    visibility: 'public',
    category: 'Data',
    pricing: { type: 'per_request', pricePerRequest: 0.001, currency: 'USD', freeTier: 1000 },
    rateLimitPerMinute: 100,
    endpoint: { baseUrl: 'https://api.acme.com/weather', method: 'GET' },
    documentationUrl: 'https://docs.acme.com/weather',
    tags: ['weather', 'data', 'geolocation'],
    createdAt: '2025-03-01T00:00:00Z',
    updatedAt: '2025-03-15T00:00:00Z',
    version: '2.4.1',
    longDescription: 'Access comprehensive weather data for over 200,000 locations worldwide. The Weather API provides current conditions including temperature, humidity, wind speed, and visibility. Get hourly forecasts up to 48 hours ahead and daily forecasts for 14 days. Query historical weather records going back 30 years for climate analysis. All responses include timezone-aware timestamps and support both metric and imperial units.',
    features: ['Current conditions for any coordinates or city name', '48-hour hourly and 14-day daily forecasts', 'Historical weather data going back 30 years', 'Forward and reverse geocoding built-in', 'Severe weather alerts and advisories', 'Air quality index and UV index data'],
    quickStart: { language: 'curl', code: 'curl -X GET "https://api.acme.com/weather?lat=51.5&lon=-0.1" \\\n  -H "X-API-Key: YOUR_API_KEY"' },
    responseFormat: 'JSON',
    authMethod: 'API Key via X-API-Key header',
  },
  {
    id: 'svc-2',
    merchantId: 'user-merchant-1',
    merchantName: 'ACME APIs',
    name: 'Geocoding API',
    description:
      'Convert addresses to coordinates and vice versa. Batch geocoding supported.',
    type: 'api',
    status: 'active',
    visibility: 'public',
    category: 'Data',
    pricing: { type: 'per_request', pricePerRequest: 0.002, currency: 'USD', freeTier: 500 },
    rateLimitPerMinute: 60,
    endpoint: { baseUrl: 'https://api.acme.com/geocode', method: 'GET' },
    tags: ['geocoding', 'maps', 'data'],
    createdAt: '2025-03-05T00:00:00Z',
    updatedAt: '2025-03-20T00:00:00Z',
    version: '1.8.0',
    longDescription: 'Transform between addresses and geographic coordinates with high accuracy. The Geocoding API handles structured and free-form address inputs, returning latitude/longitude pairs with confidence scores. Reverse geocoding converts coordinates back to human-readable addresses. Batch mode processes up to 1,000 addresses per request for bulk operations. Coverage spans 250+ countries with sub-meter precision in supported regions.',
    features: ['Forward geocoding from free-form or structured addresses', 'Reverse geocoding from coordinates to addresses', 'Batch processing up to 1,000 addresses per request', 'Autocomplete suggestions for partial inputs', 'Coverage across 250+ countries and territories'],
    quickStart: { language: 'curl', code: 'curl -X GET "https://api.acme.com/geocode?address=1600+Amphitheatre+Parkway" \\\n  -H "X-API-Key: YOUR_API_KEY"' },
    responseFormat: 'JSON',
    authMethod: 'API Key via X-API-Key header',
  },
  {
    id: 'svc-3',
    merchantId: 'user-merchant-2',
    merchantName: 'DataFlow Inc',
    name: 'Stream Processor',
    description:
      'High-throughput event stream processing. Deploy custom processing pipelines via Docker.',
    type: 'docker',
    status: 'active',
    visibility: 'public',
    category: 'Infrastructure',
    pricing: { type: 'flat', pricePerRequest: 0, currency: 'USD' },
    rateLimitPerMinute: 0,
    tags: ['streaming', 'docker', 'data-pipeline'],
    createdAt: '2025-03-10T00:00:00Z',
    updatedAt: '2025-04-01T00:00:00Z',
    version: '1.2.0',
    longDescription: 'Deploy production-ready event stream processing pipelines with a single Docker pull. The Stream Processor handles high-throughput ingestion from Kafka, RabbitMQ, and custom HTTP sources. Built-in transformations include filtering, mapping, enrichment, and windowed aggregations. Outputs can route to databases, data lakes, or downstream APIs. Horizontal scaling is automatic via Kubernetes-native autoscaling.',
    features: ['Kafka, RabbitMQ, and HTTP source connectors', 'Built-in filtering, mapping, and aggregation transforms', 'Automatic horizontal scaling via Kubernetes', 'Dead-letter queue for failed events', 'Real-time metrics and health endpoints', 'YAML-based pipeline configuration'],
    quickStart: { language: 'docker', code: 'docker pull registry.ams.io/stream-processor:latest\ndocker run -d -p 8080:8080 \\\n  -e PIPELINE_CONFIG=/etc/pipeline.yaml \\\n  registry.ams.io/stream-processor:latest' },
    responseFormat: 'N/A (Docker)',
    authMethod: 'API Key validated at runtime',
  },
  {
    id: 'svc-4',
    merchantId: 'user-merchant-2',
    merchantName: 'DataFlow Inc',
    name: 'Sentiment Analysis API',
    description:
      'Analyze text sentiment using state-of-the-art NLP models. Returns confidence scores.',
    type: 'api',
    status: 'active',
    visibility: 'private',
    category: 'AI/ML',
    pricing: {
      type: 'tiered',
      currency: 'USD',
      tiers: [
        { upTo: 1000, pricePerRequest: 0.005 },
        { upTo: 10000, pricePerRequest: 0.003 },
        { upTo: 100000, pricePerRequest: 0.001 },
      ],
    },
    rateLimitPerMinute: 30,
    endpoint: { baseUrl: 'https://api.dataflow.io/sentiment', method: 'POST' },
    tags: ['ai', 'nlp', 'sentiment'],
    createdAt: '2025-03-15T00:00:00Z',
    updatedAt: '2025-04-05T00:00:00Z',
    version: '3.1.0',
    longDescription: 'Analyze text sentiment at scale with transformer-based NLP models fine-tuned on 50M+ labeled examples. The API accepts text in 40+ languages and returns polarity (positive, negative, neutral), emotion categories, and confidence scores. Aspect-based sentiment extraction identifies opinions about specific entities or topics within longer documents. Batch analysis supports up to 100 texts per request.',
    features: ['Polarity analysis with confidence scoring', 'Emotion detection across 8 categories', 'Aspect-based sentiment extraction', 'Support for 40+ languages', 'Batch analysis up to 100 texts per request'],
    quickStart: { language: 'curl', code: 'curl -X POST "https://api.dataflow.io/sentiment" \\\n  -H "X-API-Key: YOUR_API_KEY" \\\n  -H "Content-Type: application/json" \\\n  -d \'{"text": "This product exceeded my expectations!"}\''},
    responseFormat: 'JSON',
    authMethod: 'API Key via X-API-Key header',
  },
  {
    id: 'svc-5',
    merchantId: 'user-dual-1',
    merchantName: 'TechCo Solutions',
    name: 'Auth Middleware',
    description:
      'Drop-in authentication middleware Docker image. Supports OAuth2, SAML, and API keys.',
    type: 'docker',
    status: 'pending_approval',
    visibility: 'public',
    category: 'Security',
    pricing: { type: 'free' },
    rateLimitPerMinute: 0,
    tags: ['auth', 'security', 'middleware', 'docker'],
    createdAt: '2025-04-01T00:00:00Z',
    updatedAt: '2025-04-01T00:00:00Z',
    version: '0.9.0',
    longDescription: 'A zero-configuration authentication middleware that sits between your API gateway and backend services. Supports OAuth2, SAML 2.0, and API key validation out of the box. Session management with configurable token TTLs and refresh flows. Integrates with popular identity providers including Auth0, Okta, and Azure AD.',
    features: ['OAuth2 and SAML 2.0 support', 'API key validation and rate limiting', 'Session management with configurable TTLs', 'Integration with Auth0, Okta, Azure AD', 'Health check and readiness probes'],
    quickStart: { language: 'docker', code: 'docker pull registry.ams.io/auth-middleware:latest\ndocker run -d -p 3000:3000 \\\n  -e AUTH_PROVIDER=oauth2 \\\n  registry.ams.io/auth-middleware:latest' },
    responseFormat: 'N/A (Docker)',
    authMethod: 'API Key validated at runtime',
  },
  {
    id: 'svc-6',
    merchantId: 'user-merchant-1',
    merchantName: 'ACME APIs',
    name: 'Image Recognition API',
    description: 'Identify objects, faces, and text in images using deep learning.',
    type: 'api',
    status: 'draft',
    visibility: 'public',
    category: 'AI/ML',
    pricing: { type: 'per_request', pricePerRequest: 0.01, currency: 'USD' },
    rateLimitPerMinute: 20,
    tags: ['ai', 'vision', 'image'],
    createdAt: '2025-04-10T00:00:00Z',
    updatedAt: '2025-04-10T00:00:00Z',
    version: '0.5.0',
    longDescription: 'Detect and classify objects, faces, and text within images using convolutional neural networks. Upload images up to 20MB in JPEG, PNG, or WebP formats. The API returns bounding box coordinates, labels, and confidence scores for each detected element. OCR mode extracts text from documents, receipts, and signs with support for 25 languages.',
    features: ['Object detection with bounding boxes', 'Face detection and landmark identification', 'OCR text extraction in 25 languages', 'Image moderation and NSFW detection', 'Support for JPEG, PNG, and WebP up to 20MB'],
    quickStart: { language: 'curl', code: 'curl -X POST "https://api.acme.com/vision/detect" \\\n  -H "X-API-Key: YOUR_API_KEY" \\\n  -F "image=@photo.jpg"' },
    responseFormat: 'JSON',
    authMethod: 'API Key via X-API-Key header',
  },
  {
    id: 'svc-7',
    merchantId: 'user-merchant-3',
    merchantName: 'Suspended Corp',
    name: 'Legacy Data API',
    description: 'Access to legacy data systems.',
    type: 'api',
    status: 'suspended',
    visibility: 'public',
    category: 'Data',
    pricing: { type: 'per_request', pricePerRequest: 0.003, currency: 'USD' },
    rateLimitPerMinute: 50,
    tags: ['legacy', 'data'],
    createdAt: '2025-03-15T00:00:00Z',
    updatedAt: '2025-05-01T00:00:00Z',
    version: '1.0.0',
    longDescription: 'Bridge modern applications to legacy mainframe and COBOL-based data systems. The API translates RESTful requests into mainframe-compatible calls and returns standardized JSON responses. Supports common legacy record formats including EBCDIC and fixed-width fields.',
    features: ['RESTful interface over legacy mainframe systems', 'EBCDIC and fixed-width record translation', 'Connection pooling for mainframe sessions', 'Audit trail for all data access'],
    quickStart: { language: 'curl', code: 'curl -X GET "https://api.suspended.com/legacy/records?table=CUSTOMERS" \\\n  -H "X-API-Key: YOUR_API_KEY"' },
    responseFormat: 'JSON',
    authMethod: 'API Key via X-API-Key header',
  },
])

export const mockAccessRequests: AccessRequest[] = hmrCache('__ams_accessRequests', () => [
  {
    id: 'ar-1',
    consumerId: 'user-consumer-1',
    consumerName: 'Alice Consumer',
    serviceId: 'svc-1',
    serviceName: 'Weather API',
    status: 'approved',
    requestedAt: '2025-04-05T00:00:00Z',
    resolvedAt: '2025-04-06T00:00:00Z',
    resolvedBy: 'user-admin-1',
  },
  {
    id: 'ar-2',
    consumerId: 'user-consumer-1',
    consumerName: 'Alice Consumer',
    serviceId: 'svc-2',
    serviceName: 'Geocoding API',
    status: 'approved',
    requestedAt: '2025-04-05T00:00:00Z',
    resolvedAt: '2025-04-06T00:00:00Z',
    resolvedBy: 'user-admin-1',
  },
  {
    id: 'ar-3',
    consumerId: 'user-consumer-1',
    consumerName: 'Alice Consumer',
    serviceId: 'svc-4',
    serviceName: 'Sentiment Analysis API',
    status: 'pending',
    requestedAt: '2025-04-20T00:00:00Z',
  },
  {
    id: 'ar-4',
    consumerId: 'user-consumer-2',
    consumerName: 'Dave Developer',
    serviceId: 'svc-1',
    serviceName: 'Weather API',
    status: 'approved',
    requestedAt: '2025-04-18T00:00:00Z',
    resolvedAt: '2025-04-19T00:00:00Z',
    resolvedBy: 'user-admin-1',
  },
  {
    id: 'ar-5',
    consumerId: 'user-consumer-2',
    consumerName: 'Dave Developer',
    serviceId: 'svc-3',
    serviceName: 'Stream Processor',
    status: 'denied',
    requestedAt: '2025-04-20T00:00:00Z',
    resolvedAt: '2025-04-21T00:00:00Z',
    resolvedBy: 'user-admin-1',
  },
])

export const mockServiceBlocks: ServiceBlock[] = hmrCache('__ams_serviceBlocks', () => [])
