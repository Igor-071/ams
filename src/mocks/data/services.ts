import type { Service, AccessRequest } from '@/types/service.ts'
import { hmrCache } from './hmr-cache.ts'

export const mockServices: Service[] = hmrCache('__ams_services', () => [
  {
    id: 'svc-1',
    merchantId: 'user-merchant-1',
    merchantName: 'ACME APIs',
    name: 'Weather API',
    description:
      'Real-time weather data for any location worldwide. Supports current conditions, forecasts, and historical data.',
    type: 'api',
    status: 'active',
    visibility: 'public',
    category: 'Data',
    pricing: { type: 'per_request', pricePerRequest: 0.001, currency: 'USD', freeTier: 1000 },
    rateLimitPerMinute: 100,
    endpoint: { baseUrl: 'https://api.acme.com/weather', method: 'GET' },
    documentationUrl: 'https://docs.acme.com/weather',
    tags: ['weather', 'data', 'geolocation'],
    createdAt: '2025-03-01T00:00:00Z',
    updatedAt: '2025-03-15T00:00:00Z',
  },
  {
    id: 'svc-2',
    merchantId: 'user-merchant-1',
    merchantName: 'ACME APIs',
    name: 'Geocoding API',
    description:
      'Convert addresses to coordinates and vice versa. Batch geocoding supported.',
    type: 'api',
    status: 'active',
    visibility: 'public',
    category: 'Data',
    pricing: { type: 'per_request', pricePerRequest: 0.002, currency: 'USD', freeTier: 500 },
    rateLimitPerMinute: 60,
    endpoint: { baseUrl: 'https://api.acme.com/geocode', method: 'GET' },
    tags: ['geocoding', 'maps', 'data'],
    createdAt: '2025-03-05T00:00:00Z',
    updatedAt: '2025-03-20T00:00:00Z',
  },
  {
    id: 'svc-3',
    merchantId: 'user-merchant-2',
    merchantName: 'DataFlow Inc',
    name: 'Stream Processor',
    description:
      'High-throughput event stream processing. Deploy custom processing pipelines via Docker.',
    type: 'docker',
    status: 'active',
    visibility: 'public',
    category: 'Infrastructure',
    pricing: { type: 'flat', pricePerRequest: 0, currency: 'USD' },
    rateLimitPerMinute: 0,
    tags: ['streaming', 'docker', 'data-pipeline'],
    createdAt: '2025-03-10T00:00:00Z',
    updatedAt: '2025-04-01T00:00:00Z',
  },
  {
    id: 'svc-4',
    merchantId: 'user-merchant-2',
    merchantName: 'DataFlow Inc',
    name: 'Sentiment Analysis API',
    description:
      'Analyze text sentiment using state-of-the-art NLP models. Returns confidence scores.',
    type: 'api',
    status: 'active',
    visibility: 'private',
    category: 'AI/ML',
    pricing: {
      type: 'tiered',
      currency: 'USD',
      tiers: [
        { upTo: 1000, pricePerRequest: 0.005 },
        { upTo: 10000, pricePerRequest: 0.003 },
        { upTo: 100000, pricePerRequest: 0.001 },
      ],
    },
    rateLimitPerMinute: 30,
    endpoint: { baseUrl: 'https://api.dataflow.io/sentiment', method: 'POST' },
    tags: ['ai', 'nlp', 'sentiment'],
    createdAt: '2025-03-15T00:00:00Z',
    updatedAt: '2025-04-05T00:00:00Z',
  },
  {
    id: 'svc-5',
    merchantId: 'user-dual-1',
    merchantName: 'TechCo Solutions',
    name: 'Auth Middleware',
    description:
      'Drop-in authentication middleware Docker image. Supports OAuth2, SAML, and API keys.',
    type: 'docker',
    status: 'pending_approval',
    visibility: 'public',
    category: 'Security',
    pricing: { type: 'free' },
    rateLimitPerMinute: 0,
    tags: ['auth', 'security', 'middleware', 'docker'],
    createdAt: '2025-04-01T00:00:00Z',
    updatedAt: '2025-04-01T00:00:00Z',
  },
  {
    id: 'svc-6',
    merchantId: 'user-merchant-1',
    merchantName: 'ACME APIs',
    name: 'Image Recognition API',
    description: 'Identify objects, faces, and text in images using deep learning.',
    type: 'api',
    status: 'draft',
    visibility: 'public',
    category: 'AI/ML',
    pricing: { type: 'per_request', pricePerRequest: 0.01, currency: 'USD' },
    rateLimitPerMinute: 20,
    tags: ['ai', 'vision', 'image'],
    createdAt: '2025-04-10T00:00:00Z',
    updatedAt: '2025-04-10T00:00:00Z',
  },
  {
    id: 'svc-7',
    merchantId: 'user-merchant-3',
    merchantName: 'Suspended Corp',
    name: 'Legacy Data API',
    description: 'Access to legacy data systems.',
    type: 'api',
    status: 'suspended',
    visibility: 'public',
    category: 'Data',
    pricing: { type: 'per_request', pricePerRequest: 0.003, currency: 'USD' },
    rateLimitPerMinute: 50,
    tags: ['legacy', 'data'],
    createdAt: '2025-03-15T00:00:00Z',
    updatedAt: '2025-05-01T00:00:00Z',
  },
])

export const mockAccessRequests: AccessRequest[] = hmrCache('__ams_accessRequests', () => [
  {
    id: 'ar-1',
    consumerId: 'user-consumer-1',
    consumerName: 'Alice Consumer',
    serviceId: 'svc-1',
    serviceName: 'Weather API',
    status: 'approved',
    requestedAt: '2025-04-05T00:00:00Z',
    resolvedAt: '2025-04-06T00:00:00Z',
    resolvedBy: 'user-admin-1',
  },
  {
    id: 'ar-2',
    consumerId: 'user-consumer-1',
    consumerName: 'Alice Consumer',
    serviceId: 'svc-2',
    serviceName: 'Geocoding API',
    status: 'approved',
    requestedAt: '2025-04-05T00:00:00Z',
    resolvedAt: '2025-04-06T00:00:00Z',
    resolvedBy: 'user-admin-1',
  },
  {
    id: 'ar-3',
    consumerId: 'user-consumer-1',
    consumerName: 'Alice Consumer',
    serviceId: 'svc-4',
    serviceName: 'Sentiment Analysis API',
    status: 'pending',
    requestedAt: '2025-04-20T00:00:00Z',
  },
  {
    id: 'ar-4',
    consumerId: 'user-consumer-2',
    consumerName: 'Dave Developer',
    serviceId: 'svc-1',
    serviceName: 'Weather API',
    status: 'approved',
    requestedAt: '2025-04-18T00:00:00Z',
    resolvedAt: '2025-04-19T00:00:00Z',
    resolvedBy: 'user-admin-1',
  },
  {
    id: 'ar-5',
    consumerId: 'user-consumer-2',
    consumerName: 'Dave Developer',
    serviceId: 'svc-3',
    serviceName: 'Stream Processor',
    status: 'denied',
    requestedAt: '2025-04-20T00:00:00Z',
    resolvedAt: '2025-04-21T00:00:00Z',
    resolvedBy: 'user-admin-1',
  },
])
